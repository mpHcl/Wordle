@page "/register"
@using System.Text.Json
@inject HttpClient Http
@inject ILocalStorageService LocatStorage
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthStateProvider

<style>
    .register-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: linear-gradient(135deg, #4f46e5, #3b82f6);
        font-family: 'Segoe UI', sans-serif;
    }

    .register-card {
        background: white;
        padding: 2.5rem;
        border-radius: 1rem;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        width: 100%;
        max-width: 400px;
        text-align: center;
    }

        .register-card h3 {
            margin-bottom: 1.5rem;
            color: #1e293b;
            font-weight: 600;
        }

    .form-control {
        margin-bottom: 1rem;
        border-radius: 0.5rem;
        padding: 0.75rem 1rem;
        font-size: 1rem;
    }

    .btn-primary {
        width: 100%;
        padding: 0.75rem;
        border-radius: 0.5rem;
        font-size: 1rem;
        background-color: #3b82f6;
        border: none;
        transition: 0.2s ease-in-out;
    }

        .btn-primary:hover {
            background-color: #2563eb;
            transform: translateY(-1px);
        }

    .small-text {
        margin-top: 1rem;
        font-size: 0.9rem;
        color: #6b7280;
    }

        .small-text a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: 500;
        }

            .small-text a:hover {
                text-decoration: underline;
            }
</style>

<div class="register-container">
    <div class="register-card">
        <h3>Create Account</h3>
        <p class="small-text">Join us today and get started</p>

        <input @bind="username" type="text" class="form-control" placeholder="Username" />
        <input @bind="email" type="email" class="form-control" placeholder="Email address" />
        <input @bind="password" type="password" class="form-control" placeholder="Password" />

        <button class="btn btn-primary" @onclick="RegisterUser">Sign Up</button>

        <p class="small-text mt-3">
            Already have an account? <a href="/login">Log in</a>
        </p>
    </div>
</div>

@code {
    private string username;
    private string email;
    private string password;


    private async Task RegisterUser() {
        var response = await Http.PostAsJsonAsync("/api/auth/register",
            new { Username = username, Email = email, Password = password });

        if (response.IsSuccessStatusCode) {
            Navigation.NavigateTo("/login");
        }
        else {
            // TO DO
        }
    }
}

